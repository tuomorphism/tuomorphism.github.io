---
import Layout from '~/layouts/PageLayout.astro';
import Header from '~/components/widgets/Header.astro';
import { getCollection } from 'astro:content';
import { headerData } from '~/navigation';
import Hero from '~/components/widgets/Hero.astro';
import ProjectsGrid from '~/components/projects/ProjectsGrid.astro';

const projects = await getCollection('projects');
const ordered = [...projects].sort((a, b) => {
  if (a.data.tier !== b.data.tier) return a.data.tier - b.data.tier;
  return a.data.title.localeCompare(b.data.title);
});

const metadata = { title: 'Projects' };
---

<Layout metadata={metadata}>
  <Fragment slot="header"></Fragment>
  <Header {...headerData} isSticky showToggleTheme />

  <Hero
    title="Projects"
    subtitle="Implementations and architectures in math, statistics, and software."
    size="sm"
    align="left"
    maxW="max-w-5xl"
    showDivider={true}
  />

  <section>
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
      <ProjectsGrid items={ordered} />
    </div>
  </section>
</Layout>
