---
import type { CollectionEntry } from 'astro:content';
import ProjectActions from './ProjectActions.astro';
import ProjectBlogPosts from './ProjectBlogPosts.astro';

interface Props {
  project: CollectionEntry<'projects'>;
  uid: string;
}
const { project } = Astro.props as Props;
const data = project.data;
---

<article class="w-full min-w-0 h-full overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 shadow-sm transition-shadow hover:shadow-md">
  {data.image && (
    <img
      src={data.image}
      alt={data.title}
      class="hidden sm:block w-full max-w-full aspect-[4/3] object-cover"
    />
  )}

  <!-- Content -->
  <div class="flex-1 flex flex-col divide-y divide-zinc-200/80 dark:divide-zinc-700/80 min-w-0">
    <!-- Header -->
    <header class="p-5 flex items-start justify-between gap-3 min-w-0">
      <div class="min-w-0">
        <h3 class="text-base sm:text-lg font-semibold text-zinc-900 dark:text-white truncate">
          {data.title}
        </h3>
        <p class="mt-1 text-sm text-zinc-600 dark:text-zinc-300 break-words">
          {data.description}
        </p>
      </div>
      <div class="shrink-0">
        <ProjectActions links={data.links} />
      </div>
    </header>

    <!-- Blog posts -->
    <div class="min-w-0">
      <ProjectBlogPosts posts={data.blog_posts} />
    </div>
  </div>
</article>
